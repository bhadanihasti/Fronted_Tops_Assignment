<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <fieldset>
      <form action="" method="post">
        <label for="">Enter Product Name</label>
        <input type="text" name="pname" id="pname" />
        <br /><br />
        <label for="">Enter Product Name</label>
        <input type="text" name="price" id="price" />
        <br /><br />
        <label for="">Enter Product Name</label>
        <input type="text" name="qty" id="qty" />
        <br /><br />
        <input type="submit" value="Add" id="sub" />
        <button id="printbill">Print Bill</button>
      </form>
    </fieldset>

    <div class="bill" id="bill">
      <div class="content">
        <h1>invoice</h1>
        <table>
          <thead>
            <tr>
              <th>Pname</th>
              <th>Price</th>
              <th>Qty</th>
              <th>Subtotal</th>
            </tr>
          </thead>

          <tbody id="tbdy"></tbody>
        </table>
      </div>
    </div>

    <script>
      let billArray = [];
      let pname = document.getElementById("pname");
      let price = document.getElementById("price");
      let qty = document.getElementById("qty");

      const sub = document.getElementById("sub");

      sub.addEventListener("click", function (e) {
        e.preventDefault();

        alert("form submitted");

        let product = {
          pname: pname.value,
          price: price.value,
          qty: qty.value,
        };

        billArray.push(product);
        console.log(billArray);
        pname.value = "";
        price.value = "";
        qty.value = "";
      });

      document
        .getElementById("printbill")
        .addEventListener("click", function (e) {
          e.preventDefault();
          document.getElementById("bill").style.display = "flex";
          let str = "";
          let total = 0;
          for (i = 0; i < billArray.length; i++) {
            console.log(billArray[i]);
            total += billArray[i].qty * billArray[i].price;

            str += `
            
            <tr>
              <td>${billArray[i].pname}</td>
              <td>${billArray[i].price}</td>
              <td>${billArray[i].qty}</td>
              <td>${billArray[i].qty * billArray[i].price}</td>
            </tr>
            `;
          }

          str += `
             <tr>
              <th>Total : ${total}</th>
              </tr>
          `;

          document.getElementById("tbdy").innerHTML = str;
        });
    </script>
  </body>
</html>
